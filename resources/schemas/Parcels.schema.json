{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "PxPoint Parcel Build Pipeline Configuration",
  "type": "object",
  "properties": {
    "PxPoint": {
      "type": "object",
      "properties": {
        "LicenseFile": {
          "title": "LicenseFile",
          "description": "Path to PxPoint license file used during the build.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/license.lic",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "RootDirectory": {
          "title": "RootDirectory",
          "description": "Root folder for the entire Q4 2024 build run (all relative paths resolve from here).",
          "default": "C:/PxPointDataBuild/2024q4/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        }
      },
      "additionalProperties": false
    },
    "PxData": {
      "type": "object",
      "properties": {
        "NavteqGdxFfp": {
          "title": "NavteqGdxFfp",
          "description": "Path to HERE/Navteq GDX footprint file.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/navteq_us.gdx",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "UspsGdxFfp": {
          "title": "UspsGdxFfp",
          "description": "Path to USPS GDX footprint file.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/usps_us.gdx",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        }
      },
      "additionalProperties": false
    },
    "PxLayers": {
      "type": "object",
      "properties": {
        "ReferenceShapesDfp": {
          "title": "ReferenceShapesDfp",
          "description": "Base directory for reference shapefiles (CalParcelReferenceData).",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/CalParcelReferenceData/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "ReprocessDfp": {
          "title": "ReprocessDfp",
          "description": "Directory used to write generated shapefiles for normalization.",
          "default": "C:/PxPointDataBuild/2024q4/working/parcel/normalize/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "ReprocessOverride": {
          "title": "ReprocessOverride",
          "description": "Override file containing hard-coded normalized addresses. Must reside inside ReferenceShapesDfp.",
          "default": "ReprocessOverride.txt",
          "type": "string"
        },
        "ZipPolygons": {
          "title": "ZipPolygons",
          "description": "Directory containing ZIP code polygon shapefiles.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/ZIP_POLY/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "ZipPoints": {
          "title": "ZipPoints",
          "description": "Directory containing ZIP code point shapefiles.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/ZIP_POINTS/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "Counties": {
          "title": "Counties",
          "description": "Directory for county boundary shapefiles.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/NT_County/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "Municipal": {
          "title": "Municipal",
          "description": "Directory for municipal boundary shapefiles.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/PX_Municipal/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "States": {
          "title": "States",
          "description": "Directory for state boundary shapefiles.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/STATES/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "Coastlines": {
          "title": "Coastlines",
          "description": "Directory for coastline shapefiles used for clipping.",
          "default": "C:/PxPointDataBuild/2024q4/dataset/PxPointReference/COASTLINES/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "DebugOutputDfp": {
          "title": "DebugOutputDfp",
          "description": "Optional folder for writing job metrics and debug outputs.",
          "default": "C:/PxPointDataBuild/2024q4/working/parcel/debug_output/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        }
      },
      "additionalProperties": false
    },
    "ParcelParams": {
      "type": "object",
      "properties": {
        "StreetProximityBuffer": {
          "title": "StreetProximityBuffer",
          "description": "Max distance (meters) parcels are considered proximate during grouping (CabinInTheWoods.exe).",
          "default": 250,
          "type": "integer",
          "minimum": 0
        }
      },
      "additionalProperties": false
    },
    "BuilderParams": {
      "type": "object",
      "properties": {
        "DatabaseServer": {
          "title": "DatabaseServer",
          "description": "SQL Server host or named instance used by the parcel build.",
          "default": "PXPOINT_SQL_SERVER_01",
          "type": "string"
        },
        "ParcelDB": {
          "title": "ParcelDB",
          "description": "Database name for this build.",
          "default": "PxPoint_2024q4",
          "type": "string"
        },
        "DatabaseUsername": {
          "title": "DatabaseUsername",
          "description": "Database login username.",
          "default": "PxPointUser",
          "type": "string"
        },
        "DatabasePassword": {
          "title": "DatabasePassword",
          "description": "Database login password.",
          "default": "YourSecurePasswordHere",
          "type": "string",
          "format": "password"
        },
        "FirstJobld": {
          "title": "FirstJobld",
          "description": "First JobID from tbl_Jobs to process (0 = start from beginning).",
          "default": 1,
          "type": "integer",
          "minimum": 0
        },
        "LastJobld": {
          "title": "LastJobld",
          "description": "Last JobID from tbl_Jobs to process (0 = process all).",
          "default": 3142,
          "type": "integer",
          "minimum": 0
        },
        "DatasetBuildCategory": {
          "title": "DatasetBuildCategory",
          "description": "Build type selector. Allowed values: Parcel or ParcelPlus.",
          "default": "ParcelPlus",
          "enum": [
            "Parcel",
            "ParcelPlus"
          ],
          "type": "string"
        },
        "DandAImportFilePath": {
          "title": "DandAImportFilePath",
          "description": "Pipe-separated Diablo (D&A) import file.",
          "default": "C:/PxPointDataBuild/2024q4/VendorPrepared/DNA/Parcel_Point_Delivery_20240105.txt",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "RawShapeDir": {
          "title": "RawShapeDir",
          "description": "Root folder containing raw Parcel and Point shapefiles (expects 'parcel' and 'points' subfolders).",
          "default": "C:/PxPointDataBuild/2024q4/VendorRaw/parcelpoint/Data/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "SpatialRecordImportDir": {
          "title": "SpatialRecordImportDir",
          "description": "Folder containing spatial record files for import.",
          "default": "C:/PxPointDataBuild/2024q4/VendorRaw/spatialrecord/min/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "ParcelOpsDir": {
          "title": "ParcelOpsDir",
          "description": "Output folder for parcel operations.",
          "default": "C:/PxPointDataBuild/2024q4/working/parcel/output/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "LogFileLocation": {
          "title": "LogFileLocation",
          "description": "Folder where log files will be written.",
          "default": "C:/PxPointDataBuild/2024q4/logs/",
          "type": "string",
          "pattern": "^(?:[A-Za-z]:)?[\\\\/].+"
        },
        "StatQuarter": {
          "title": "StatQuarter",
          "description": "Statistical quarter for this build (used by final indexing). Format YYYY-Q{1..4}.",
          "default": "2024-Q4",
          "type": "string",
          "pattern": "^\\d{4}-Q[1-4]$"
        }
      },
      "additionalProperties": false
    },
    "Steps": {
      "type": "object",
      "properties": {
        "ResetNormalize": {
          "title": "ResetNormalize",
          "description": "Reset normalization state before running.",
          "default": true,
          "type": "boolean"
        },
        "RebuildParcelDatabase": {
          "title": "RebuildParcelDatabase",
          "description": "Drop/recreate and rebuild the parcel database.",
          "default": false,
          "type": "boolean"
        },
        "CreateJobBlocks": {
          "title": "CreateJobBlocks",
          "description": "Compute job blocks for parallel processing.",
          "default": true,
          "type": "boolean"
        },
        "PrepareAndLoadParcels": {
          "title": "PrepareAndLoadParcels",
          "description": "Prepare raw inputs and load parcels into staging.",
          "default": true,
          "type": "boolean"
        },
        "ImportFromDandA": {
          "title": "ImportFromDandA",
          "description": "Import data from D&A (Diablo).",
          "default": true,
          "type": "boolean"
        },
        "ImportFromSpatialRecord": {
          "title": "ImportFromSpatialRecord",
          "description": "Import data from Spatial Record files.",
          "default": true,
          "type": "boolean"
        },
        "NormalizeParcels": {
          "title": "NormalizeParcels",
          "description": "Run parcel normalization steps.",
          "default": true,
          "type": "boolean"
        },
        "LoadPxyFiles": {
          "title": "LoadPxyFiles",
          "description": "Load PXY files produced earlier into the database.",
          "default": true,
          "type": "boolean"
        },
        "MergePxyBlocks": {
          "title": "MergePxyBlocks",
          "description": "Merge PXY blocks into final datasets.",
          "default": true,
          "type": "boolean"
        },
        "sIndexPxyFile": {
          "title": "sIndexPxyFile",
          "description": "Index PXY file (possibly a typo in source; kept verbatim).",
          "default": true,
          "type": "boolean"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}